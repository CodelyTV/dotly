#!/usr/bin/env bash

set -euo pipefail

source "$DOTLY_PATH/scripts/core/_main.sh"
source "$DOTLY_PATH/scripts/self/utils/install.sh"

##? Install dotly and setup dotfiles
#?? 1.0.0
##?
##? Usage:
##?    install

if ! platform::command_exists dot; then
  dot() { "$DOTLY_PATH/bin/dot" "$@"; }
fi

if ! platform::command_exists zsh; then
  output::error "Zsh not installed, installing"

  if dot package install zsh 2>&1; then
    output::solution "Zsh installed!"
  else
    output::error "Could not install Zsh!"
    exit 5
  fi
else
  output::answer "Zsh already installed!"
fi

